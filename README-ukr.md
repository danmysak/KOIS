# KOIS

Це — проста олімпіадна система для тестування в режимі реального часу програм на C++, Python, Java і т. д. та подальшого їх збирання організаторами змагання.

Систему використовували на учнівських олімпіадах з інформатики Солом’янського району.


## Робота з системою

Завантажити бінарні файли системи можна [зі сторінки релізів](https://github.com/danmysak/KOIS/releases/). Зауважте, що вихідні коди в репозиторії мають версію 1.0, тоді як реліз — для версії 2.0: вихідні файли версії 2.0 було втрачено.

Система працює під управлінням операційної системи Windows та не потребує встановлення. Просто запустіть файл `KOIS.exe` із довільної директорії, розташувавши поруч із ним:
- файл `compilers.txt` (див. «Компілятори» нижче);
- файл `contest-template.txt` (див. «Шаблон для `contest.txt`» нижче);
- заархівований із паролем файл із задачами `problems.rar` (див. «Параметри задач» нижче);
- допоміжні бібліотеки `jic_gdiplus.dll` та `unrar.dll`: їх можна завантажити разом із бінарним релізом, проте `unrar.dll` може знадобитися оновити відповідно до використовуваної версії RAR-архіву.

Схема роботи з системою така:
1) Учасник запускає систему та вводить інформацію про себе.
2) Система показує діалогове вікно з запитом паролю. Коли учасник його дізнається, вводить його у вікно.
3) З’являється основне вікно системи зі списком задач, за допомогою якого учасник може надсилати свої розв’язки до них.
4) Коли учасник надсилає розв’язок, система запускає на ньому всі підготовлені тести і виводить діагностику по них.
5) В основному вікні видно також усі поточні здачі з інформацією про них і можливістю перегляну вихідного коду зданих програм.

Усі здані учасником програми з інформацією про час здачі кожної та файлом `contest.txt` система покладе в папку `contest`, яку можна зібрати.


## Компілятори

Файл `compilers.txt` містить перелік конфігурацій доступних компіляторів. Кожен компілятор займає 6 рядків (версія 2.0) або 4 рядки (версія 1.0) із порожнім рядком між кожними двома компіляторами.

1) У першому рядку вказано назву компілятора або мови програмування, наприклад `Java` або `C++`.
2) У другому рядку вказано коментар, який повинна мати у своєму першому рядку програма, до якої буде застосовано даний компілятор, наприклад `/* Java */` або `/* GCC */`.
3) У третьому рядку вказано шлях або шляхи до компілятора. Якщо шляхів кілька, їх слід розділити двома рисками з пробілами навколо них. Приклад: `C:\Program Files\Java\jdk1.8.0_161\bin\javac.exe || C:\Program Files\Java\jdk1.8.0_191\bin\javac.exe`.
4) У четвертому рядку вказано параметри компіляції, у яких можна використати змінні `$file` (вихідний файл), `$exec` (шлях до виконуваного файлу, який очікує знайти KOIS) та `$kdir` (папка KOIS). Приклади: `$file` або `-static -lm -O2 $file -o $exec`.
5) (Тільки для версії 2.0.) У п’ятому рядку вказано шлях або шляхи до інтерпретатора. Якщо шляхів кілька, їх слід розділити двома рисками з пробілами навколо них. Приклад: `C:\Program Files\Java\jdk1.8.0_161\bin\java.exe || C:\Program Files\Java\jdk1.8.0_191\bin\java.exe`.
6) (Тільки для версії 2.0.) У шостому рядку вказано параметри інтерпретації. Можна використовувати змінні `$file` (вихідний файл) і `$task` (назва задачі). 


## Шаблон для `contest.txt`

У файлі `contest-template.txt` зберігається шаблон для файлу `contest.txt`, який буде автоматично створено в каталозі `contest`. Формат файлу:

1) повне ім’я учасника;
2) район;
3) повна назва навчального закладу;
4) клас;
5) ідентифікатор робочого місця (номер комп’ютера);
6) контактна інформація;
7) скорочена назва навчального закладу.

Частина або всі рядки у файлі `contest-template.txt` можуть бути порожніми.


## Параметри задач

Заархівованими у `problems.rar` мають бути:

- Файл `problems.txt`, що містить по одному рядку на кожну задачу. В межах одного рядка, розділені похилою рискою / та пробілами навколо неї, містяться такі дані про задачу:
  - технічна назва англійською;
  - назва українською;
  - обмеження на час у мілісекундах;
  - обмеження на пам’ять у байтах;
  - кількість тестів;
  - технічна назва чекера.
- Виконувані файли чекерів (див. «Чекери» нижче), які називаються `checker-<name>.exe`, де `<name>` — технічна назва чекера.
- По папці на кожну задачу. Назва папки має збігатися з технічною назвою задачі. Вміст папки — файли `1.in`, `1.ans`, `2.in`, `2.ans`, ... (за кількістю тестів, заданою в `problems.txt`), що містять відповідно вхідні дані та еталони вихідних даних (або підказки чекеру).

Приклад файлу `problems.rar` разом із паролем до нього розміщено в папці `example` репозиторію.


## Чекери

Чекер — консольна програма. Їй буде передано на вхід чотири аргументи:

1) Шлях до вхідного файлу.
2) Шлях до вихідного файлу, який створила програма учасника.
3) Шлях до еталонного вихідного файлу (або файлу з підказкою чекеру).
4) Шлях до файлу, куди необхідно записати результат перевірки.

Якщо виведення програми учасника неправильне, чекер виводить у файл-результат текст повідомлення про помилку (у кодуванні Windows-1251). Інакше у файл-результат потрібно записати порожній рядок.

Приклад вихідного файлу чекера є в репозиторії, а бінарного — в релізі.


## Режим зневадження

Якщо в домашню директорію системи покласти файл із назвою `debug.txt`, KOIS виводитиме туди по одній усі команди, які він виконує в процесі тестування програми учасника. Після виведення кожної команди система також виводить модальне вікно з повідомленням про це і призупиняє свою роботу.